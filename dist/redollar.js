"use strict";
!function(t){var n=t.RD=t.RD||{},a=(n.CONST=n.CONST||{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,HALF_PI:Math.PI/2,DOUBLE_PI:2*Math.PI},n.Utils={point:function(t,n){return{x:t,y:n}},distance:function(t,n){var a=n.x-t.x,r=n.y-t.y;return Math.sqrt(a*a+r*r)},getAABB:function(t){for(var n=1/0,a=-1/0,r=1/0,e=-1/0,i=0,h=t.length;h>i;i++){var o=t[i];n=Math.min(n,o.x),a=Math.max(a,o.x),r=Math.min(r,o.y),e=Math.max(e,o.y)}return[n,r,a,e,a-n,e-r]},cosSimilarity:function(t,n){for(var a=0,r=0,e=0,i=0;i<t.length;i++){var h=t[i],o=n[i];a+=h*o,r+=h*h,e+=o*o}return a/Math.sqrt(r*e)},cosDistance:function(t,n){for(var a=0,r=0,e=0;e<t.length;e+=2)a+=t[e]*n[e]+t[e+1]*n[e+1],r+=t[e]*n[e+1]-t[e+1]*n[e];var i=Math.atan(r/a),h=Math.acos(a*Math.cos(i)+r*Math.sin(i));return h},polylineLength:function(t){for(var n=0,r=1,e=t.length;e>r;r++)n+=a.distance(t[r-1],t[r]);return n},resample:function(t,n){for(var r=a.polylineLength(t)/(n-1),e=0,i=t[0],h=[i],o=t.length,s=1;o>s;){var u=t[s],c=a.distance(i,u);if(e+c>=r){var f=(r-e)/c,l=i.x+f*(u.x-i.x),M=i.y+f*(u.y-i.y),v=a.point(l,M);h.push(v),e=0,i=v}else e+=c,i=u,s++}return h.length==n-1&&h.push(t[o-1]),h}})}("undefined"==typeof exports?this:exports);
!function(t){var i=t.RD=t.RD||{},n=i.Polyline=function(t){this.points=t||[]},o=i.Utils,s={constructor:n,id:null,name:null,points:null,origPoints:null,ignoreRotate:!1,originX:0,originY:0,ratio1D:.2,rotationInvariance:Math.PI/4,normalPointCount:40,normalSize:200,init:function(t){t=t!==!1,this.origPoints=this.points,t&&(this.points=o.resample(this.origPoints,this.normalPointCount)),this.pointCount=this.points.length,this.firstPoint=this.points[0],this.centroid=this.getCentroid(),this.translateTo(o.point(this.originX,this.originY)),this.aabb=o.getAABB(this.points),t&&(this.scaleTo(this.normalSize),this.angle=this.indicativeAngle(),this.rotateBy(-this.angle)),this.vector=this.vectorize()},indicativeAngle:function(){var t=Math.atan2(this.firstPoint.x,this.firstPoint.y);if(this.rotationInvariance){var i=this.rotationInvariance,n=i*Math.floor((t+i/2)/i);return t-n}return t},length:function(){return o.polylineLength(this.points)},vectorize:function(){for(var t,i=0,n=[],o=this.pointCount,s=0;t=this.points[s],o>s;s++)n.push(t.x),n.push(t.y),i+=t.x*t.x+t.y*t.y;var r=Math.sqrt(i);o<<=1;for(var s=0;o>s;s++)n[s]/=r;return n},getCentroid:function(){for(var t=0,i=0,n=0;n<this.pointCount;n++)t+=this.points[n].x,i+=this.points[n].y;return t/=this.pointCount,i/=this.pointCount,o.point(t,i)},translateTo:function(t){var i=this.centroid;i.x-=t.x,i.y-=t.y;for(var n=0;n<this.pointCount;n++){var o=this.points[n],s=o.x-i.x,r=o.y-i.y;o.x=s,o.y=r}},rotateBy:function(t){for(var i=Math.cos(t),n=Math.sin(t),o=0;o<this.pointCount;o++){var s=this.points[o],r=s.y*i-s.y*n,a=s.y*n+s.y*i;s.y=r,s.y=a}},scale:function(t){for(var i=0;i<this.pointCount;i++){var n=this.points[i],o=n.x*t.x,s=n.y*t.y;n.x=o,n.y=s}},scaleTo:function(t,i){i=i||t;var n=this.aabb;if(this.ratio1D){var s=Math.max(n[4],n[5]),r=Math.min(n[4],n[5]),a=r/s<this.ratio1D;if(a){var h=o.point(t/s,i/s);return this.scale(h)}}var h=o.point(t/n[4],i/n[5]);this.scale(h)}};for(var r in s)n.prototype[r]=s[r]}("undefined"==typeof exports?this:exports);
!function(t){var o=t.RD=t.RD||{},r=o.DollarOne=function(t){for(var o in t)this[o]=t[o];this.gesturePool=this.gesturePool||{}},e=(o.CONST,o.Utils),i=o.Polyline,n={constructor:r,threshold:.3,ratio1D:.2,rotationInvariance:Math.PI/4,normalPointCount:40,normalSize:200,recognize:function(t,o){var r=this.createPolyline(t);r.init();var i=r.vector,n=this.threshold,a=null;for(var s in this.gesturePool){var l=this.gesturePool[s],u=e.cosDistance(l.vector,i);if(n>u&&(n=u,a=s,o))return a}return a},createPolyline:function(t){var o=new i(t);return o.ratio1D=this.ratio1D,o.rotationInvariance=this.rotationInvariance,o.normalPointCount=this.normalPointCount,o.normalSize=this.normalSize,o},getGesture:function(t){return this.gesturePool[t]},addGesture:function(t,o,r){var e=Array.isArray(o)?this.createPolyline(o):o;e.name=t,e.init(r),this.gesturePool[t]=e},removeGesture:function(t){return t?void delete this.gesturePool[t]:void(this.gesturePool={})}};for(var a in n)r.prototype[a]=n[a]}("undefined"==typeof exports?this:exports);